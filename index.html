<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edoardo's Quest: From Milan to Marketing</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Press Start 2P', cursive;
            background: #000;
            color: #fff;
            overflow: hidden;
            image-rendering: pixelated;
        }
        
        #gameCanvas {
            display: block;
            margin: 0 auto;
            background: #1a1a2e;
            border: 4px solid #16213e;
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.3);
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    
    <script>
        // =====================
        // PHOTO CONFIGURATION - ADD YOUR IMAGES HERE
        // =====================
        const PHOTOS = {
            family_milan_1: "https://ibb.co/V0Vdz632",      // Level 1 photo
            london_life_1: "YOUR_LONDON_PHOTO_URL_HERE",       // Level 2 photo
            reda_travel_1: "YOUR_TRAVEL_PHOTO_URL_HERE"        // Level 3 photo
        };
        
        // GAME DATA STRUCTURE
        const GAME_DATA = {
            title: "Edoardo's Quest: From Milan to Marketing",
            currentLevel: 0,
            currentScene: 'start',
            levelProgress: [false, false, false],
            
            levels: {
                1: {
                    title: "The Italian Origins",
                    theme: "Milan family & early life",
                    bgColor: "#8b0000",
                    unlocked: true,
                    scenes: {
                        intro: {
                            type: "dialogue",
                            background: "milan",
                            dialogues: [
                                "Benvenuti in Milan! This is where Edoardo's story begins.",
                                "He grew up in a big Italian family: mum, dad, younger brother Ricky (a full-on Gen Z character), and a lot of relatives.",
                                "How many cousins? Fourteen. Yes, fourteen. Family gatherings were harder than beating the final boss.",
                                "In Milan, Edoardo studied mechanical engineering while working at his family pub, The Friends, an English-style pub in the city.",
                                "He even got certified as a bartender. But something was off... gears and equations weren't his true calling."
                            ]
                        },
                        minigame: {
                            type: "pizza_dash",
                            title: "Family Pizza Dash",
                            objective: "Serve the correct pizza to the correct cousin before time runs out!",
                            timeLimit: 45,
                            targetScore: 8,
                            pizzaTypes: ["Margherita", "Pepperoni", "Veggie"],
                            failMessage: "The family has staged a pasta mutiny. Try again?"
                        },
                        photo: {
                            type: "photo_spot",
                            id: "family_milan_1",
                            caption: "Edoardo's family in Milan"
                        },
                        outro: {
                            type: "dialogue",
                            background: "classroom",
                            dialogues: [
                                "While working at The Friends pub and studying mechanical engineering, Edoardo realised something important.",
                                "He didn't actually enjoy mechanical engineering. At all.",
                                "So he changed direction completely and started studying drama in Milan.",
                                "Stage over spreadsheets. Cue dramatic music..."
                            ]
                        }
                    }
                },
                2: {
                    title: "The London Leap",
                    theme: "Moving to London & drama school",
                    bgColor: "#1a472a",
                    unlocked: false,
                    scenes: {
                        intro: {
                            type: "dialogue",
                            background: "london",
                            dialogues: [
                                "In 2014, at 21, Edoardo moved to London.",
                                "He worked in hospitality to pay the bills and got admitted to the Academy of Live and Recorded Arts (ALRA) for a full-time foundation year.",
                                "It was an amazing experience... but London life was expensive, and acting didn't immediately pay the rent."
                            ]
                        },
                        minigame: {
                            type: "bartender",
                            title: "Bartender Hustle - London Edition",
                            objective: "Mix and serve drinks in the correct order!",
                            timeLimit: 50,
                            targetScore: 10,
                            drinks: ["Beer", "G&T", "Mocktail", "Whisky"],
                            failMessage: "Your cocktails confused everyone. The manager gives you a motivational talk. Try again?"
                        },
                        photo: {
                            type: "photo_spot",
                            id: "london_life_1",
                            caption: "Edoardo in London / Drama school"
                        },
                        outro: {
                            type: "dialogue",
                            background: "desk",
                            dialogues: [
                                "At 25, Edoardo felt a bit lost.",
                                "He decided to work on himself: self-help books, financial education, and self-improvement.",
                                "He started his own projects: a Shopify dropshipping store and learning digital marketing principles.",
                                "During COVID, he doubled down on his studies, determined to leave hospitality and change career.",
                                "Mission accomplished: he landed a job at Diageo. Special shout-out: Olga hired him.",
                                "New chapter: from pouring drinks to driving digital performance."
                            ]
                        }
                    }
                },
                3: {
                    title: "Life Today & Beyond",
                    theme: "Current life & interests",
                    bgColor: "#1a1a4a",
                    unlocked: false,
                    scenes: {
                        intro: {
                            type: "dialogue",
                            background: "apartment",
                            dialogues: [
                                "Today, Edoardo has a lovely girlfriend, Reda, from Lithuania.",
                                "If you don't know where Lithuania is, don't worry - he couldn't point it out on a map at first either.",
                                "Lithuania is a Baltic country in the north of Europe, known for being very flat with glacially flat terrain, low hills, and lots of forests.",
                                "Fun fact joke: Flattest country, lots of flat-earthers.",
                                "Beyond work, Edoardo is a geek in the best way.",
                                "He loves new tech, especially AI, and reads both fiction and non-fiction.",
                                "Right now he's reading a book about the British man-of-war The Wager, a ship that wrecked near Patagonia in the 18th century.",
                                "He plays chess - still a self-described noob - but aims to reach a 1000 Elo rating this year.",
                                "And no, he hasn't given up on drama: he's joining an improv course next month.",
                                "With Reda, he loves to travel and eat good food."
                            ]
                        },
                        minigame: {
                            type: "quiz",
                            title: "Quiz of Life - Meet Edoardo",
                            objective: "Answer questions about Edoardo to fill the Friendship Meter!",
                            questions: [
                                { q: "Where is Edoardo originally from?", options: ["Milan, Italy", "Rome, Italy", "Madrid, Spain"], correct: 0 },
                                { q: "What did he first study?", options: ["Mechanical engineering", "Economics", "Computer science"], correct: 0 },
                                { q: "What school did he attend in London?", options: ["Cooking school", "Drama school (ALRA)", "Coding bootcamp"], correct: 1 },
                                { q: "What is his chess goal?", options: ["500 Elo", "1000 Elo", "World champion tomorrow"], correct: 1 },
                                { q: "What are some favourite dishes?", options: ["Pizza, lasagna, carbonara", "Only sushi", "Only salad"], correct: 0 },
                                { q: "What project did he start?", options: ["Shopify/digital marketing", "Carpentry", "Gardening blog"], correct: 0 }
                            ],
                            failMessage: "Not quite! Let's try again to get to know Edoardo better."
                        },
                        photo: {
                            type: "photo_spot",
                            id: "reda_travel_1",
                            caption: "Edoardo & Reda / Travel / Food"
                        },
                        outro: {
                            type: "dialogue",
                            background: "world",
                            dialogues: [
                                "You've now unlocked Edoardo's story.",
                                "From Milan family chaos and The Friends pub...",
                                "...to drama school in London, self-improvement, Shopify experiments, and a full career switch into digital marketing at Diageo.",
                                "Today, he's a curious, geeky, travel-loving, AI-interested human who's still learning, reading, and performing (hello improv).",
                                "And he's very excited to work with you."
                            ]
                        }
                    }
                }
            }
        };
        
        // GAME ENGINE
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        let gameState = {
            screen: 'start',
            currentLevel: 0,
            currentScene: 'intro',
            currentDialogue: 0,
            levelUnlocked: [true, false, false],
            minigameState: null,
            blinkState: true
        };
        
        let lastTime = Date.now();
        let blinkTimer = 0;
        let mouseX = 0, mouseY = 0, mouseClicked = false;
        
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;
        });
        
        canvas.addEventListener('click', () => { mouseClicked = true; });
        
        // DRAWING HELPERS
        function drawPixelBackground(theme) {
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            if (theme === 'milan') {
                gradient.addColorStop(0, '#ff6b6b');
                gradient.addColorStop(1, '#8b0000');
            } else if (theme === 'london') {
                gradient.addColorStop(0, '#555');
                gradient.addColorStop(1, '#1a472a');
            } else if (theme === 'apartment' || theme === 'desk') {
                gradient.addColorStop(0, '#2a2a5a');
                gradient.addColorStop(1, '#1a1a4a');
            } else {
                gradient.addColorStop(0, '#1a1a2e');
                gradient.addColorStop(1, '#0f0f1e');
            }
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
        
        function drawText(text, x, y, size = 12, color = '#fff') {
            ctx.font = `${size}px 'Press Start 2P'`;
            ctx.fillStyle = color;
            ctx.textAlign = 'left';
            const maxWidth = canvas.width - 100;
            const words = text.split(' ');
            let line = '';
            let yOffset = 0;
            for (let word of words) {
                const testLine = line + word + ' ';
                if (ctx.measureText(testLine).width > maxWidth && line !== '') {
                    ctx.fillText(line, x, y + yOffset);
                    line = word + ' ';
                    yOffset += size + 8;
                } else {
                    line = testLine;
                }
            }
            ctx.fillText(line, x, y + yOffset);
            return yOffset + size;
        }
        
        function drawButton(text, x, y, width, height) {
            const hover = mouseX > x && mouseX < x + width && mouseY > y && mouseY < y + height;
            ctx.fillStyle = hover ? '#00d4ff' : '#0f3460';
            ctx.fillRect(x, y, width, height);
            ctx.strokeStyle = '#00d4ff';
            ctx.lineWidth = 3;
            ctx.strokeRect(x, y, width, height);
            ctx.fillStyle = hover ? '#0f3460' : '#00d4ff';
            ctx.font = '10px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText(text, x + width / 2, y + height / 2 + 4);
            return hover && mouseClicked;
        }
        
        // SCREEN RENDERERS
        function renderStartScreen() {
            drawPixelBackground('start');
            ctx.fillStyle = '#00d4ff';
            ctx.font = '24px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText("EDOARDO'S QUEST", canvas.width / 2, 150);
            ctx.font = '12px "Press Start 2P"';
            ctx.fillText("From Milan to Marketing", canvas.width / 2, 190);
            
            // Pixel character
            ctx.fillStyle = '#ffcc99';
            ctx.fillRect(375, 250, 50, 70);
            ctx.fillStyle = '#000';
            ctx.fillRect(385, 265, 10, 10);
            ctx.fillRect(405, 265, 10, 10);
            ctx.fillRect(390, 285, 20, 5);
            
            if (gameState.blinkState) {
                ctx.fillStyle = '#fff';
                ctx.font = '16px "Press Start 2P"';
                ctx.fillText("PRESS START", canvas.width / 2, 450);
            }
            
            if (drawButton("START", 300, 500, 200, 50)) {
                gameState.screen = 'levelSelect';
            }
        }
        
        function renderLevelSelect() {
            drawPixelBackground('menu');
            ctx.fillStyle = '#00d4ff';
            ctx.font = '20px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText("SELECT LEVEL", canvas.width / 2, 80);
            
            for (let i = 1; i <= 3; i++) {
                const level = GAME_DATA.levels[i];
                const y = 120 + (i - 1) * 140;
                const unlocked = gameState.levelUnlocked[i - 1];
                
                ctx.fillStyle = unlocked ? '#0f3460' : '#333';
                ctx.fillRect(150, y, 500, 100);
                ctx.strokeStyle = unlocked ? '#00d4ff' : '#666';
                ctx.lineWidth = 3;
                ctx.strokeRect(150, y, 500, 100);
                
                if (unlocked) {
                    ctx.fillStyle = '#00d4ff';
                    ctx.font = '14px "Press Start 2P"';
                    ctx.textAlign = 'left';
                    ctx.fillText(`LEVEL ${i}:`, 170, y + 40);
                    ctx.font = '10px "Press Start 2P"';
                    ctx.fillText(level.title, 170, y + 70);
                    
                    const hover = mouseX > 150 && mouseX < 650 && mouseY > y && mouseY < y + 100;
                    if (hover && mouseClicked) {
                        startLevel(i);
                    }
                } else {
                    ctx.fillStyle = '#666';
                    ctx.font = '14px "Press Start 2P"';
                    ctx.textAlign = 'center';
                    ctx.fillText("LOCKED", 400, y + 55);
                }
            }
        }
        
        function startLevel(levelNum) {
            gameState.currentLevel = levelNum;
            gameState.currentScene = 'intro';
            gameState.currentDialogue = 0;
            gameState.minigameState = null;
            gameState.screen = 'dialogue';
        }
        
        function advanceScene() {
            const sceneOrder = ['intro', 'minigame', 'photo', 'outro'];
            const currentIndex = sceneOrder.indexOf(gameState.currentScene);
            
            if (currentIndex < sceneOrder.length - 1) {
                gameState.currentScene = sceneOrder[currentIndex + 1];
                gameState.currentDialogue = 0;
                gameState.minigameState = null;
                
                const sceneType = GAME_DATA.levels[gameState.currentLevel].scenes[gameState.currentScene].type;
                if (sceneType === 'dialogue' || sceneType === 'photo_spot') {
                    gameState.screen = sceneType === 'photo_spot' ? 'photo' : 'dialogue';
                } else {
                    gameState.screen = 'minigame';
                }
            } else {
                // Level complete
                if (gameState.currentLevel < 3) {
                    gameState.levelUnlocked[gameState.currentLevel] = true;
                }
                gameState.screen = 'levelSelect';
            }
        }
        
        function renderDialogue() {
            const level = GAME_DATA.levels[gameState.currentLevel];
            const sceneData = level.scenes[gameState.currentScene];
            
            drawPixelBackground(sceneData.background);
            
            ctx.fillStyle = 'rgba(0,0,0,0.7)';
            ctx.fillRect(50, 400, 700, 150);
            ctx.strokeStyle = '#00d4ff';
            ctx.lineWidth = 3;
            ctx.strokeRect(50, 400, 700, 150);
            
            const dialogue = sceneData.dialogues[gameState.currentDialogue];
            drawText(dialogue, 70, 430, 11);
            
            ctx.fillStyle = '#0f0';
            ctx.font = '10px "Press Start 2P"';
            ctx.textAlign = 'right';
            ctx.fillText(`[${gameState.currentDialogue + 1}/${sceneData.dialogues.length}]`, 720, 530);
            
            if (drawButton("NEXT", 600, 510, 120, 35)) {
                gameState.currentDialogue++;
                if (gameState.currentDialogue >= sceneData.dialogues.length) {
                    advanceScene();
                }
            }
        }
        
        function renderPhoto() {
            const level = GAME_DATA.levels[gameState.currentLevel];
            const sceneData = level.scenes.photo;
            
            drawPixelBackground('apartment');
            
            ctx.fillStyle = '#00d4ff';
            ctx.font = '16px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText("PHOTO UNLOCKED!", canvas.width / 2, 80);
            
            // Photo frame
            ctx.fillStyle = '#333';
            ctx.fillRect(200, 120, 400, 300);
            ctx.strokeStyle = '#00d4ff';
            ctx.lineWidth = 4;
            ctx.strokeRect(200, 120, 400, 300);
            
            const photoUrl = PHOTOS[sceneData.id];
            if (photoUrl && photoUrl !== "YOUR_FAMILY_PHOTO_URL_HERE" && 
                photoUrl !== "YOUR_LONDON_PHOTO_URL_HERE" && 
                photoUrl !== "YOUR_TRAVEL_PHOTO_URL_HERE") {
                const img = new Image();
                img.src = photoUrl;
                img.onload = () => ctx.drawImage(img, 210, 130, 380, 280);
            } else {
                ctx.fillStyle = '#666';
                ctx.font = '12px "Press Start 2P"';
                ctx.fillText("[Photo Placeholder]", canvas.width / 2, 280);
            }
            
            ctx.fillStyle = '#fff';
            ctx.font = '10px "Press Start 2P"';
            ctx.fillText(sceneData.caption, canvas.width / 2, 450);
            
            if (drawButton("CONTINUE", 300, 500, 200, 50)) {
                advanceScene();
            }
        }
        
        function renderMinigame() {
            const level = GAME_DATA.levels[gameState.currentLevel];
            const minigame = level.scenes.minigame;
            
            if (minigame.type === 'pizza_dash') {
                renderPizzaDash(minigame);
            } else if (minigame.type === 'bartender') {
                renderBartender(minigame);
            } else if (minigame.type === 'quiz') {
                renderQuiz(minigame);
            }
        }
        
        function renderPizzaDash(minigame) {
            drawPixelBackground('milan');
            
            if (!gameState.minigameState) {
                gameState.minigameState = {
                    time: minigame.timeLimit,
                    score: 0,
                    currentOrder: minigame.pizzaTypes[Math.floor(Math.random() * minigame.pizzaTypes.length)]
                };
            }
            
            const state = gameState.minigameState;
            
            ctx.fillStyle = 'rgba(0,0,0,0.6)';
            ctx.fillRect(0, 0, canvas.width, 100);
            ctx.fillStyle = '#fff';
            ctx.font = '14px "Press Start 2P"';
            ctx.textAlign = 'left';
            ctx.fillText(`TIME: ${Math.ceil(state.time)}s`, 50, 40);
            ctx.fillText(`SCORE: ${state.score}/${minigame.targetScore}`, 50, 70);
            
            ctx.fillStyle = '#fff';
            ctx.font = '16px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText("COUSIN WANTS:", canvas.width / 2, 180);
            ctx.fillText(state.currentOrder, canvas.width / 2, 220);
            
            for (let i = 0; i < minigame.pizzaTypes.length; i++) {
                const x = 150 + i * 180;
                if (drawButton(minigame.pizzaTypes[i], x, 350, 150, 60)) {
                    if (minigame.pizzaTypes[i] === state.currentOrder) {
                        state.score++;
                        if (state.score >= minigame.targetScore) {
                            advanceScene();
                        } else {
                            state.currentOrder = minigame.pizzaTypes[Math.floor(Math.random() * minigame.pizzaTypes.length)];
                        }
                    } else {
                        state.time -= 5;
                    }
                }
            }
            
            state.time -= (Date.now() - lastTime) / 1000;
            
            if (state.time <= 0) {
                renderFailScreen(minigame.failMessage);
            }
        }
        
        function renderBartender(minigame) {
            drawPixelBackground('london');
            
            if (!gameState.minigameState) {
                gameState.minigameState = {
                    time: minigame.timeLimit,
                    score: 0,
                    currentOrder: minigame.drinks[Math.floor(Math.random() * minigame.drinks.length)]
                };
            }
            
            const state = gameState.minigameState;
            
            ctx.fillStyle = 'rgba(0,0,0,0.6)';
            ctx.fillRect(0, 0, canvas.width, 100);
            ctx.fillStyle = '#fff';
            ctx.font = '14px "Press Start 2P"';
            ctx.textAlign = 'left';
            ctx.fillText(`TIME: ${Math.ceil(state.time)}s`, 50, 40);
            ctx.fillText(`SCORE: ${state.score}/${minigame.targetScore}`, 50, 70);
            
            ctx.fillStyle = '#fff';
            ctx.font = '16px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText("ORDER:", canvas.width / 2, 180);
            ctx.fillText(state.currentOrder, canvas.width / 2, 220);
            
            for (let i = 0; i < minigame.drinks.length; i++) {
                const x = 80 + i * 170;
                if (drawButton(minigame.drinks[i], x, 350, 150, 60)) {
                    if (minigame.drinks[i] === state.currentOrder) {
                        state.score++;
                        if (state.score >= minigame.targetScore) {
                            advanceScene();
                        } else {
                            state.currentOrder = minigame.drinks[Math.floor(Math.random() * minigame.drinks.length)];
                        }
                    } else {
                        state.time -= 3;
                    }
                }
            }
            
            state.time -= (Date.now() - lastTime) / 1000;
            
            if (state.time <= 0) {
                renderFailScreen(minigame.failMessage);
            }
        }
        
        function renderQuiz(minigame) {
            drawPixelBackground('apartment');
            
            if (!gameState.minigameState) {
                gameState.minigameState = { currentQ: 0, score: 0 };
            }
            
            const state = gameState.minigameState;
            const question = minigame.questions[state.currentQ];
            
            ctx.fillStyle = 'rgba(0,0,0,0.6)';
            ctx.fillRect(50, 50, 700, 80);
            ctx.fillStyle = '#fff';
            ctx.font = '12px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText(`Question ${state.currentQ + 1}/${minigame.questions.length}`, canvas.width / 2, 100);
            
            ctx.fillStyle = '#00d4ff';
            ctx.font = '11px "Press Start 2P"';
            drawText(question.q, 70, 180, 11, '#00d4ff');
            
            for (let i = 0; i < question.options.length; i++) {
                if (drawButton(question.options[i], 150, 280 + i * 80, 500, 60)) {
                    if (i === question.correct) {
                        state.score++;
                    }
                    state.currentQ++;
                    if (state.currentQ >= minigame.questions.length) {
                        advanceScene();
                    }
                }
            }
        }
        
        function renderFailScreen(message) {
            ctx.fillStyle = 'rgba(0,0,0,0.9)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#f00';
            ctx.font = '20px "Press Start 2P"';
            ctx.textAlign = 'center';
            ctx.fillText("TIME'S UP!", canvas.width / 2, 250);
            ctx.fillStyle = '#fff';
            drawText(message, 100, 320, 11, '#fff');
            
            if (drawButton("TRY AGAIN", 300, 420, 200, 50)) {
                gameState.minigameState = null;
            }
        }
        
        // MAIN GAME LOOP
        function gameLoop() {
            const now = Date.now();
            const delta = now - lastTime;
            
            blinkTimer += delta;
            if (blinkTimer > 500) {
                gameState.blinkState = !gameState.blinkState;
                blinkTimer = 0;
            }
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            switch (gameState.screen) {
                case 'start': renderStartScreen(); break;
                case 'levelSelect': renderLevelSelect(); break;
                case 'dialogue': renderDialogue(); break;
                case 'minigame': renderMinigame(); break;
                case 'photo': renderPhoto(); break;
            }
            
            mouseClicked = false;
            lastTime = now;
            requestAnimationFrame(gameLoop);
        }
        
        // START THE GAME
        gameLoop();
    </script>
</body>
</html>
